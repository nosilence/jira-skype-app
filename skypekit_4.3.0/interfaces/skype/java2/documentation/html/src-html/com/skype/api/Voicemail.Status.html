<HTML>
<BODY BGCOLOR="white">
<PRE>
<FONT color="green">001</FONT>    package com.skype.api;<a name="line.1"></a>
<FONT color="green">002</FONT>    <a name="line.2"></a>
<FONT color="green">003</FONT>    import com.skype.ipc.SidRoot;<a name="line.3"></a>
<FONT color="green">004</FONT>    import com.skype.ipc.SidObject;<a name="line.4"></a>
<FONT color="green">005</FONT>    import com.skype.ipc.EnumConverting;<a name="line.5"></a>
<FONT color="green">006</FONT>    import com.skype.ipc.PropertyEnumConverting;<a name="line.6"></a>
<FONT color="green">007</FONT>    import com.skype.ipc.Decoding;<a name="line.7"></a>
<FONT color="green">008</FONT>    import com.skype.ipc.Encoding;<a name="line.8"></a>
<FONT color="green">009</FONT>    import com.skype.ipc.Encoding;<a name="line.9"></a>
<FONT color="green">010</FONT>    import java.io.IOException;<a name="line.10"></a>
<FONT color="green">011</FONT>    import com.skype.ipc.PropertyEnumConverting;<a name="line.11"></a>
<FONT color="green">012</FONT>    import com.skype.ipc.SidGetResponding;<a name="line.12"></a>
<FONT color="green">013</FONT>    <a name="line.13"></a>
<FONT color="green">014</FONT>    /**<a name="line.14"></a>
<FONT color="green">015</FONT>     * Wrapper class that includes voicemail-specific methods and properties. In the Skype Conversation API, Voicemail is actually something of a misnomer for what would be more accurately called Voice Message. <a name="line.15"></a>
<FONT color="green">016</FONT>     * <a name="line.16"></a>
<FONT color="green">017</FONT>     * The traditional Voicemail use case involves recording a voice message when an incoming call does not get answered in a pre-determined amount of time. In the Skype Conversation API, voicemail does not depend on a call going unanswered - you can post a voice message asynchronously into any dialog conversation at any time. <a name="line.17"></a>
<FONT color="green">018</FONT>     * <a name="line.18"></a>
<FONT color="green">019</FONT>     * In fact, a high-level action flow directing unanswered incoming live sessions to voicemail is not something provided by the Conversation API - implementation of this use case is largely up to your UI. <a name="line.19"></a>
<FONT color="green">020</FONT>     * <a name="line.20"></a>
<FONT color="green">021</FONT>     * The fact that your UI must retrieve incoming Voicemails by monitoring changes to a Conversation instance's Messages illustrates this conceptual difference between traditional voicemail and voice messages. The message type Message.POSTED_VOICE_MESSAGE indicates that a Message instance should be handled as a voice message instead of by displaying its body text in the Conversation UI. Message.GetVoiceMessage enables you to retrieve the associated Voicemail instance; Voicemail.StartPlayback enables you to listen to the message audio. <a name="line.21"></a>
<FONT color="green">022</FONT>     * <a name="line.22"></a>
<FONT color="green">023</FONT>     * To put it another way, the object chain goes like this:  <a name="line.23"></a>
<FONT color="green">024</FONT>     * @code <a name="line.24"></a>
<FONT color="green">025</FONT>     * Contact-&gt;Conversation-&gt;Message-&gt;Voicemail  <a name="line.25"></a>
<FONT color="green">026</FONT>     * &lt;/CODE&gt;  <a name="line.26"></a>
<FONT color="green">027</FONT>     * <a name="line.27"></a>
<FONT color="green">028</FONT>     * There are three basic types of Voicemail objects: <a name="line.28"></a>
<FONT color="green">029</FONT>     *  - INCOMING - received voice messages that can be retrieved from Message objects; <a name="line.29"></a>
<FONT color="green">030</FONT>     *  - OUTGOING - outbound voice messages that can be created with Conversation.StartVoiceMessage; <a name="line.30"></a>
<FONT color="green">031</FONT>     *  - GREETING - voice messages that represent auto-answer greetings, either recorded by the user (CUSTOM_GREETING) or included as part of SkypeKit (DEFAULT_GREETING). This is the audio that gets played back to sender of the voice message before he can start recording his voice message. <a name="line.31"></a>
<FONT color="green">032</FONT>     * <a name="line.32"></a>
<FONT color="green">033</FONT>     * Before trying to send out a voicemail, you should ensure that target Contact has the capability to receive them. Use Contact.GetCapabilityStatus to check for Contact.CAPABILITY_CAN_BE_SENT_VM. <a name="line.33"></a>
<FONT color="green">034</FONT>     * <a name="line.34"></a>
<FONT color="green">035</FONT>     * Recording and Sending a Voice Message <a name="line.35"></a>
<FONT color="green">036</FONT>     * <a name="line.36"></a>
<FONT color="green">037</FONT>     * The first step is to obtain a dialog Conversation with the target Contact. In that conversation, you can initiate the outgoing voice message with Conversation.StartVoiceMessage <a name="line.37"></a>
<FONT color="green">038</FONT>     * <a name="line.38"></a>
<FONT color="green">039</FONT>     * Note that this call does not return an actual Voicemail object. To catch when an object gets created, you will need to check Conversation.P_ACTIVE_VM_ID property updates. <a name="line.39"></a>
<FONT color="green">040</FONT>     * <a name="line.40"></a>
<FONT color="green">041</FONT>     * After invoking Conversation.StartVoiceMessage, SkypeKit instantiates a Voicemail instance for the target Contact's greeting (with type CUSTOM_GREETING or DEFAULT_GREETING). At this point, the Conversation.P_ACTIVE_VM_ID property update fires, newVM contains a reference to the greeting, and playback of the greeting for the sender starts automatically.  <a name="line.41"></a>
<FONT color="green">042</FONT>     * <a name="line.42"></a>
<FONT color="green">043</FONT>     * Once the greeting playback finishes, SkypeKit instantiates a second Voicemail instance for the outgoing voice message. At this point, the Conversation.P_ACTIVE_VM_ID property update fires again, newVM now contains a reference to the outgoing message, and recording starts automatically. If you want to include notification and/or error handling for whether this message was sent successfully, you should make a copy of newVM now. <a name="line.43"></a>
<FONT color="green">044</FONT>     * <a name="line.44"></a>
<FONT color="green">045</FONT>     * Once the user finishes (or abandons) recording of their message, they want to either send the message or to cancel it. To send the message, use Conversation.PostVoiceMessage; to cancel the message, use Conversation.LeaveLiveSession. <a name="line.45"></a>
<FONT color="green">046</FONT>     * <a name="line.46"></a>
<FONT color="green">047</FONT>     * Both of these actions results in the Conversation.P_ACTIVE_VM_ID property update firing for a third time, setting the value to NULL. However, the Voicemail object will actually continue its existence past this point. Saving a reference to the message's Voicemail object when you start recording it enables you to keep receiving Voicemail property updates. This in turn enables your UI to check whether voice message send succeeded or failed. <a name="line.47"></a>
<FONT color="green">048</FONT>     * <a name="line.48"></a>
<FONT color="green">049</FONT>     * The relevant terminal state Voicemail.P_STATUS property values are: <a name="line.49"></a>
<FONT color="green">050</FONT>     *  - Voicemail.CANCELLED - recording and/or sending of this message was cancelled <a name="line.50"></a>
<FONT color="green">051</FONT>     *  - Voicemail.UPLOADED - message sent <a name="line.51"></a>
<FONT color="green">052</FONT>     *  - Voicemail.FAILED - message could not be sent <a name="line.52"></a>
<FONT color="green">053</FONT>     * <a name="line.53"></a>
<FONT color="green">054</FONT>     * Receiving and Playing Back a Voice Message <a name="line.54"></a>
<FONT color="green">055</FONT>     * <a name="line.55"></a>
<FONT color="green">056</FONT>     * On the remote side, the Voicemail appears as a Message object of type Message.POSTED_VOICE_MESSAGE. The message's author property contains the Skype Name of the Voicemail originator, and its BodyXml property contains the message length and title text in following format: <a name="line.56"></a>
<FONT color="green">057</FONT>     * <a name="line.57"></a>
<FONT color="green">058</FONT>     * @code <a name="line.58"></a>
<FONT color="green">059</FONT>     * &lt;voicemail alt="Sent voicemail to people in this conversation."&gt;&lt;message length="5" &gt;&lt;/message&gt;&lt;/voicemail&gt;  <a name="line.59"></a>
<FONT color="green">060</FONT>     * &lt;/CODE&gt; <a name="line.60"></a>
<FONT color="green">061</FONT>     * <a name="line.61"></a>
<FONT color="green">062</FONT>     * Receiver side UI can then retrieve the Voicemail object from the message with Message.GetVoiceMessage and <a name="line.62"></a>
<FONT color="green">063</FONT>     * start local playback with Message.StartPlayback. <a name="line.63"></a>
<FONT color="green">064</FONT>     */<a name="line.64"></a>
<FONT color="green">065</FONT>    public final class Voicemail extends SidObject {<a name="line.65"></a>
<FONT color="green">066</FONT>            public enum Type implements EnumConverting {<a name="line.66"></a>
<FONT color="green">067</FONT>                    INCOMING        (1),<a name="line.67"></a>
<FONT color="green">068</FONT>                    DEFAULT_GREETING(4),<a name="line.68"></a>
<FONT color="green">069</FONT>                    CUSTOM_GREETING (2),<a name="line.69"></a>
<FONT color="green">070</FONT>                    OUTGOING        (3);<a name="line.70"></a>
<FONT color="green">071</FONT>                    private final int key;<a name="line.71"></a>
<FONT color="green">072</FONT>                    Type(int key) {<a name="line.72"></a>
<FONT color="green">073</FONT>                            this.key = key;<a name="line.73"></a>
<FONT color="green">074</FONT>                    };<a name="line.74"></a>
<FONT color="green">075</FONT>                    public int getId()   { return key; }<a name="line.75"></a>
<FONT color="green">076</FONT>                    public EnumConverting getDefault() { return INCOMING; }<a name="line.76"></a>
<FONT color="green">077</FONT>                    public EnumConverting convert(int from) { return Type.get(from); }<a name="line.77"></a>
<FONT color="green">078</FONT>                    public EnumConverting[] getArray(final int size) { return new Type[size]; }<a name="line.78"></a>
<FONT color="green">079</FONT>                    public static Type get(int from) {<a name="line.79"></a>
<FONT color="green">080</FONT>                            switch (from) {<a name="line.80"></a>
<FONT color="green">081</FONT>                            case 1: return INCOMING;<a name="line.81"></a>
<FONT color="green">082</FONT>                            case 4: return DEFAULT_GREETING;<a name="line.82"></a>
<FONT color="green">083</FONT>                            case 2: return CUSTOM_GREETING;<a name="line.83"></a>
<FONT color="green">084</FONT>                            case 3: return OUTGOING;<a name="line.84"></a>
<FONT color="green">085</FONT>                            }<a name="line.85"></a>
<FONT color="green">086</FONT>                            return INCOMING;<a name="line.86"></a>
<FONT color="green">087</FONT>                    }<a name="line.87"></a>
<FONT color="green">088</FONT>                    public static final int INCOMING_VALUE         = 1;<a name="line.88"></a>
<FONT color="green">089</FONT>                    public static final int DEFAULT_GREETING_VALUE = 4;<a name="line.89"></a>
<FONT color="green">090</FONT>                    public static final int CUSTOM_GREETING_VALUE  = 2;<a name="line.90"></a>
<FONT color="green">091</FONT>                    public static final int OUTGOING_VALUE         = 3;<a name="line.91"></a>
<FONT color="green">092</FONT>            }<a name="line.92"></a>
<FONT color="green">093</FONT>            public enum Status implements EnumConverting {<a name="line.93"></a>
<FONT color="green">094</FONT>                    NOTDOWNLOADED  (1),<a name="line.94"></a>
<FONT color="green">095</FONT>                    DOWNLOADING    (2),<a name="line.95"></a>
<FONT color="green">096</FONT>                    UNPLAYED       (3),<a name="line.96"></a>
<FONT color="green">097</FONT>                    BUFFERING      (4),<a name="line.97"></a>
<FONT color="green">098</FONT>                    PLAYING        (5),<a name="line.98"></a>
<FONT color="green">099</FONT>                    PLAYED         (6),<a name="line.99"></a>
<FONT color="green">100</FONT>                    BLANK          (7),<a name="line.100"></a>
<FONT color="green">101</FONT>                    RECORDING      (8),<a name="line.101"></a>
<FONT color="green">102</FONT>                    RECORDED       (9),<a name="line.102"></a>
<FONT color="green">103</FONT>                    UPLOADING      (10),<a name="line.103"></a>
<FONT color="green">104</FONT>                    UPLOADED       (11),<a name="line.104"></a>
<FONT color="green">105</FONT>                    DELETING       (12),<a name="line.105"></a>
<FONT color="green">106</FONT>                    FAILED         (13),<a name="line.106"></a>
<FONT color="green">107</FONT>                    DELETING_FAILED(14),<a name="line.107"></a>
<FONT color="green">108</FONT>                    CHECKING       (15),<a name="line.108"></a>
<FONT color="green">109</FONT>                    CANCELLED      (16);<a name="line.109"></a>
<FONT color="green">110</FONT>                    private final int key;<a name="line.110"></a>
<FONT color="green">111</FONT>                    Status(int key) {<a name="line.111"></a>
<FONT color="green">112</FONT>                            this.key = key;<a name="line.112"></a>
<FONT color="green">113</FONT>                    };<a name="line.113"></a>
<FONT color="green">114</FONT>                    public int getId()   { return key; }<a name="line.114"></a>
<FONT color="green">115</FONT>                    public EnumConverting getDefault() { return NOTDOWNLOADED; }<a name="line.115"></a>
<FONT color="green">116</FONT>                    public EnumConverting convert(int from) { return Status.get(from); }<a name="line.116"></a>
<FONT color="green">117</FONT>                    public EnumConverting[] getArray(final int size) { return new Status[size]; }<a name="line.117"></a>
<FONT color="green">118</FONT>                    public static Status get(int from) {<a name="line.118"></a>
<FONT color="green">119</FONT>                            switch (from) {<a name="line.119"></a>
<FONT color="green">120</FONT>                            case  1: return NOTDOWNLOADED;<a name="line.120"></a>
<FONT color="green">121</FONT>                            case  2: return DOWNLOADING;<a name="line.121"></a>
<FONT color="green">122</FONT>                            case  3: return UNPLAYED;<a name="line.122"></a>
<FONT color="green">123</FONT>                            case  4: return BUFFERING;<a name="line.123"></a>
<FONT color="green">124</FONT>                            case  5: return PLAYING;<a name="line.124"></a>
<FONT color="green">125</FONT>                            case  6: return PLAYED;<a name="line.125"></a>
<FONT color="green">126</FONT>                            case  7: return BLANK;<a name="line.126"></a>
<FONT color="green">127</FONT>                            case  8: return RECORDING;<a name="line.127"></a>
<FONT color="green">128</FONT>                            case  9: return RECORDED;<a name="line.128"></a>
<FONT color="green">129</FONT>                            case 10: return UPLOADING;<a name="line.129"></a>
<FONT color="green">130</FONT>                            case 11: return UPLOADED;<a name="line.130"></a>
<FONT color="green">131</FONT>                            case 12: return DELETING;<a name="line.131"></a>
<FONT color="green">132</FONT>                            case 13: return FAILED;<a name="line.132"></a>
<FONT color="green">133</FONT>                            case 14: return DELETING_FAILED;<a name="line.133"></a>
<FONT color="green">134</FONT>                            case 15: return CHECKING;<a name="line.134"></a>
<FONT color="green">135</FONT>                            case 16: return CANCELLED;<a name="line.135"></a>
<FONT color="green">136</FONT>                            }<a name="line.136"></a>
<FONT color="green">137</FONT>                            return NOTDOWNLOADED;<a name="line.137"></a>
<FONT color="green">138</FONT>                    }<a name="line.138"></a>
<FONT color="green">139</FONT>                    public static final int NOTDOWNLOADED_VALUE   =  1;<a name="line.139"></a>
<FONT color="green">140</FONT>                    public static final int DOWNLOADING_VALUE     =  2;<a name="line.140"></a>
<FONT color="green">141</FONT>                    public static final int UNPLAYED_VALUE        =  3;<a name="line.141"></a>
<FONT color="green">142</FONT>                    public static final int BUFFERING_VALUE       =  4;<a name="line.142"></a>
<FONT color="green">143</FONT>                    public static final int PLAYING_VALUE         =  5;<a name="line.143"></a>
<FONT color="green">144</FONT>                    public static final int PLAYED_VALUE          =  6;<a name="line.144"></a>
<FONT color="green">145</FONT>                    public static final int BLANK_VALUE           =  7;<a name="line.145"></a>
<FONT color="green">146</FONT>                    public static final int RECORDING_VALUE       =  8;<a name="line.146"></a>
<FONT color="green">147</FONT>                    public static final int RECORDED_VALUE        =  9;<a name="line.147"></a>
<FONT color="green">148</FONT>                    public static final int UPLOADING_VALUE       = 10;<a name="line.148"></a>
<FONT color="green">149</FONT>                    public static final int UPLOADED_VALUE        = 11;<a name="line.149"></a>
<FONT color="green">150</FONT>                    public static final int DELETING_VALUE        = 12;<a name="line.150"></a>
<FONT color="green">151</FONT>                    public static final int FAILED_VALUE          = 13;<a name="line.151"></a>
<FONT color="green">152</FONT>                    public static final int DELETING_FAILED_VALUE = 14;<a name="line.152"></a>
<FONT color="green">153</FONT>                    public static final int CHECKING_VALUE        = 15;<a name="line.153"></a>
<FONT color="green">154</FONT>                    public static final int CANCELLED_VALUE       = 16;<a name="line.154"></a>
<FONT color="green">155</FONT>            }<a name="line.155"></a>
<FONT color="green">156</FONT>            public enum FailureReason implements EnumConverting {<a name="line.156"></a>
<FONT color="green">157</FONT>                    MISC_ERROR                 (1),<a name="line.157"></a>
<FONT color="green">158</FONT>                    CONNECT_ERROR              (2),<a name="line.158"></a>
<FONT color="green">159</FONT>                    NO_VOICEMAIL_CAPABILITY    (3),         NO_SUCH_VOICEMAIL          (4),<a name="line.159"></a>
<FONT color="green">160</FONT>                    FILE_READ_ERROR            (5),<a name="line.160"></a>
<FONT color="green">161</FONT>                    FILE_WRITE_ERROR           (6),<a name="line.161"></a>
<FONT color="green">162</FONT>                    RECORDING_ERROR            (7),<a name="line.162"></a>
<FONT color="green">163</FONT>                    PLAYBACK_ERROR             (8),<a name="line.163"></a>
<FONT color="green">164</FONT>                    NO_PERMISSION              (9),<a name="line.164"></a>
<FONT color="green">165</FONT>                    /** receiver turned off voicemail */<a name="line.165"></a>
<FONT color="green">166</FONT>                    RECEIVER_DISABLED_VOICEMAIL(10),<a name="line.166"></a>
<FONT color="green">167</FONT>                    /** receiver has not authorized you and privacy is not set to anyone */<a name="line.167"></a>
<FONT color="green">168</FONT>                    SENDER_NOT_AUTHORIZED      (11),<a name="line.168"></a>
<FONT color="green">169</FONT>                    /** receiver blocked sender */<a name="line.169"></a>
<FONT color="green">170</FONT>                    SENDER_BLOCKED             (12);<a name="line.170"></a>
<FONT color="green">171</FONT>                    private final int key;<a name="line.171"></a>
<FONT color="green">172</FONT>                    FailureReason(int key) {<a name="line.172"></a>
<FONT color="green">173</FONT>                            this.key = key;<a name="line.173"></a>
<FONT color="green">174</FONT>                    };<a name="line.174"></a>
<FONT color="green">175</FONT>                    public int getId()   { return key; }<a name="line.175"></a>
<FONT color="green">176</FONT>                    public EnumConverting getDefault() { return MISC_ERROR; }<a name="line.176"></a>
<FONT color="green">177</FONT>                    public EnumConverting convert(int from) { return FailureReason.get(from); }<a name="line.177"></a>
<FONT color="green">178</FONT>                    public EnumConverting[] getArray(final int size) { return new FailureReason[size]; }<a name="line.178"></a>
<FONT color="green">179</FONT>                    public static FailureReason get(int from) {<a name="line.179"></a>
<FONT color="green">180</FONT>                            switch (from) {<a name="line.180"></a>
<FONT color="green">181</FONT>                            case  1: return MISC_ERROR;<a name="line.181"></a>
<FONT color="green">182</FONT>                            case  2: return CONNECT_ERROR;<a name="line.182"></a>
<FONT color="green">183</FONT>                            case  3: return NO_VOICEMAIL_CAPABILITY;<a name="line.183"></a>
<FONT color="green">184</FONT>                            case  4: return NO_SUCH_VOICEMAIL;<a name="line.184"></a>
<FONT color="green">185</FONT>                            case  5: return FILE_READ_ERROR;<a name="line.185"></a>
<FONT color="green">186</FONT>                            case  6: return FILE_WRITE_ERROR;<a name="line.186"></a>
<FONT color="green">187</FONT>                            case  7: return RECORDING_ERROR;<a name="line.187"></a>
<FONT color="green">188</FONT>                            case  8: return PLAYBACK_ERROR;<a name="line.188"></a>
<FONT color="green">189</FONT>                            case  9: return NO_PERMISSION;<a name="line.189"></a>
<FONT color="green">190</FONT>                            case 10: return RECEIVER_DISABLED_VOICEMAIL;<a name="line.190"></a>
<FONT color="green">191</FONT>                            case 11: return SENDER_NOT_AUTHORIZED;<a name="line.191"></a>
<FONT color="green">192</FONT>                            case 12: return SENDER_BLOCKED;<a name="line.192"></a>
<FONT color="green">193</FONT>                            }<a name="line.193"></a>
<FONT color="green">194</FONT>                            return MISC_ERROR;<a name="line.194"></a>
<FONT color="green">195</FONT>                    }<a name="line.195"></a>
<FONT color="green">196</FONT>                    public static final int MISC_ERROR_VALUE                  =  1;<a name="line.196"></a>
<FONT color="green">197</FONT>                    public static final int CONNECT_ERROR_VALUE               =  2;<a name="line.197"></a>
<FONT color="green">198</FONT>                    public static final int NO_VOICEMAIL_CAPABILITY_VALUE     =  3;<a name="line.198"></a>
<FONT color="green">199</FONT>                    public static final int NO_SUCH_VOICEMAIL_VALUE           =  4;<a name="line.199"></a>
<FONT color="green">200</FONT>                    public static final int FILE_READ_ERROR_VALUE             =  5;<a name="line.200"></a>
<FONT color="green">201</FONT>                    public static final int FILE_WRITE_ERROR_VALUE            =  6;<a name="line.201"></a>
<FONT color="green">202</FONT>                    public static final int RECORDING_ERROR_VALUE             =  7;<a name="line.202"></a>
<FONT color="green">203</FONT>                    public static final int PLAYBACK_ERROR_VALUE              =  8;<a name="line.203"></a>
<FONT color="green">204</FONT>                    public static final int NO_PERMISSION_VALUE               =  9;<a name="line.204"></a>
<FONT color="green">205</FONT>                    public static final int RECEIVER_DISABLED_VOICEMAIL_VALUE = 10;<a name="line.205"></a>
<FONT color="green">206</FONT>                    public static final int SENDER_NOT_AUTHORIZED_VALUE       = 11;<a name="line.206"></a>
<FONT color="green">207</FONT>                    public static final int SENDER_BLOCKED_VALUE              = 12;<a name="line.207"></a>
<FONT color="green">208</FONT>            }<a name="line.208"></a>
<FONT color="green">209</FONT>            private final static byte[] P_TYPE_req = {(byte) 90,(byte) 71,(byte) 100,(byte) 93,(byte) 7};<a name="line.209"></a>
<FONT color="green">210</FONT>            private final static byte[] P_PARTNER_HANDLE_req = {(byte) 90,(byte) 71,(byte) 101,(byte) 93,(byte) 7};<a name="line.210"></a>
<FONT color="green">211</FONT>            private final static byte[] P_PARTNER_DISPLAY_NAME_req = {(byte) 90,(byte) 71,(byte) 102,(byte) 93,(byte) 7};<a name="line.211"></a>
<FONT color="green">212</FONT>            private final static byte[] P_STATUS_req = {(byte) 90,(byte) 71,(byte) 103,(byte) 93,(byte) 7};<a name="line.212"></a>
<FONT color="green">213</FONT>            private final static byte[] P_FAILURE_REASON_req = {(byte) 90,(byte) 71,(byte) 104,(byte) 93,(byte) 7};<a name="line.213"></a>
<FONT color="green">214</FONT>            private final static byte[] P_SUBJECT_req = {(byte) 90,(byte) 71,(byte) 105,(byte) 93,(byte) 7};<a name="line.214"></a>
<FONT color="green">215</FONT>            private final static byte[] P_TIMESTAMP_req = {(byte) 90,(byte) 71,(byte) 106,(byte) 93,(byte) 7};<a name="line.215"></a>
<FONT color="green">216</FONT>            private final static byte[] P_DURATION_req = {(byte) 90,(byte) 71,(byte) 107,(byte) 93,(byte) 7};<a name="line.216"></a>
<FONT color="green">217</FONT>            private final static byte[] P_ALLOWED_DURATION_req = {(byte) 90,(byte) 71,(byte) 108,(byte) 93,(byte) 7};<a name="line.217"></a>
<FONT color="green">218</FONT>            private final static byte[] P_PLAYBACK_PROGRESS_req = {(byte) 90,(byte) 71,(byte) 109,(byte) 93,(byte) 7};<a name="line.218"></a>
<FONT color="green">219</FONT>            private final static byte[] P_CONVERSATION_req = {(byte) 90,(byte) 71,(byte) 190,(byte) 6,(byte) 93,(byte) 7};<a name="line.219"></a>
<FONT color="green">220</FONT>            private final static byte[] P_CHAT_MSG_GUID_req = {(byte) 90,(byte) 71,(byte) 191,(byte) 6,(byte) 93,(byte) 7};<a name="line.220"></a>
<FONT color="green">221</FONT>            /** Properties of the Voicemail class */<a name="line.221"></a>
<FONT color="green">222</FONT>            public enum Property implements PropertyEnumConverting {<a name="line.222"></a>
<FONT color="green">223</FONT>                    P_UNKNOWN             (0,0,null,0,null),<a name="line.223"></a>
<FONT color="green">224</FONT>                    P_TYPE                (100, 1, P_TYPE_req, 0, Type.get(0)),<a name="line.224"></a>
<FONT color="green">225</FONT>                    P_PARTNER_HANDLE      (101, 2, P_PARTNER_HANDLE_req, 0, null),<a name="line.225"></a>
<FONT color="green">226</FONT>                    P_PARTNER_DISPLAY_NAME(102, 3, P_PARTNER_DISPLAY_NAME_req, 0, null),<a name="line.226"></a>
<FONT color="green">227</FONT>                    P_STATUS              (103, 4, P_STATUS_req, 0, Status.get(0)),<a name="line.227"></a>
<FONT color="green">228</FONT>                    P_FAILURE_REASON      (104, 5, P_FAILURE_REASON_req, 0, FailureReason.get(0)),<a name="line.228"></a>
<FONT color="green">229</FONT>                    P_SUBJECT             (105, 6, P_SUBJECT_req, 0, null),<a name="line.229"></a>
<FONT color="green">230</FONT>                    P_TIMESTAMP           (106, 7, P_TIMESTAMP_req, 0, null),<a name="line.230"></a>
<FONT color="green">231</FONT>                    P_DURATION            (107, 8, P_DURATION_req, 0, null),<a name="line.231"></a>
<FONT color="green">232</FONT>                    P_ALLOWED_DURATION    (108, 9, P_ALLOWED_DURATION_req, 0, null),<a name="line.232"></a>
<FONT color="green">233</FONT>                    P_PLAYBACK_PROGRESS   (109, 10, P_PLAYBACK_PROGRESS_req, 0, null),<a name="line.233"></a>
<FONT color="green">234</FONT>                    P_CONVERSATION        (830, 11, P_CONVERSATION_req, 18, null),<a name="line.234"></a>
<FONT color="green">235</FONT>                    P_CHAT_MSG_GUID       (831, 12, P_CHAT_MSG_GUID_req, 0, null);<a name="line.235"></a>
<FONT color="green">236</FONT>                    private final int    key;<a name="line.236"></a>
<FONT color="green">237</FONT>                    private final int    idx;<a name="line.237"></a>
<FONT color="green">238</FONT>                    private final byte[] req;<a name="line.238"></a>
<FONT color="green">239</FONT>                    private final int    mod;<a name="line.239"></a>
<FONT color="green">240</FONT>                    private final EnumConverting enumConverter;<a name="line.240"></a>
<FONT color="green">241</FONT>                    Property(int key, int idx, byte[] req, int mod, EnumConverting converter) {<a name="line.241"></a>
<FONT color="green">242</FONT>                            this.key = key;<a name="line.242"></a>
<FONT color="green">243</FONT>                            this.idx = idx;<a name="line.243"></a>
<FONT color="green">244</FONT>                            this.req = req;<a name="line.244"></a>
<FONT color="green">245</FONT>                            this.mod = mod;<a name="line.245"></a>
<FONT color="green">246</FONT>                            this.enumConverter = converter;<a name="line.246"></a>
<FONT color="green">247</FONT>                    };<a name="line.247"></a>
<FONT color="green">248</FONT>                    public boolean  isCached()    { return idx &gt; 0;   }<a name="line.248"></a>
<FONT color="green">249</FONT>                    public int      getIdx()      { return idx;       }<a name="line.249"></a>
<FONT color="green">250</FONT>                    public int      getId()       { return key;       }<a name="line.250"></a>
<FONT color="green">251</FONT>                    public byte[]   getRequest()  { return req;       }<a name="line.251"></a>
<FONT color="green">252</FONT>                    public EnumConverting getDefault()  { return P_UNKNOWN; }<a name="line.252"></a>
<FONT color="green">253</FONT>                    public int      getModuleId() { return mod;       }<a name="line.253"></a>
<FONT color="green">254</FONT>                    public EnumConverting getEnumConverter()    { return enumConverter;   }<a name="line.254"></a>
<FONT color="green">255</FONT>                    public EnumConverting convert(final int from) { return Property.get(from); }<a name="line.255"></a>
<FONT color="green">256</FONT>                    public EnumConverting[] getArray(final int size) { return new Property[size]; }<a name="line.256"></a>
<FONT color="green">257</FONT>                    public static Property get(final int from) {<a name="line.257"></a>
<FONT color="green">258</FONT>                            switch (from) {<a name="line.258"></a>
<FONT color="green">259</FONT>                            case 100: return P_TYPE;<a name="line.259"></a>
<FONT color="green">260</FONT>                            case 101: return P_PARTNER_HANDLE;<a name="line.260"></a>
<FONT color="green">261</FONT>                            case 102: return P_PARTNER_DISPLAY_NAME;<a name="line.261"></a>
<FONT color="green">262</FONT>                            case 103: return P_STATUS;<a name="line.262"></a>
<FONT color="green">263</FONT>                            case 104: return P_FAILURE_REASON;<a name="line.263"></a>
<FONT color="green">264</FONT>                            case 105: return P_SUBJECT;<a name="line.264"></a>
<FONT color="green">265</FONT>                            case 106: return P_TIMESTAMP;<a name="line.265"></a>
<FONT color="green">266</FONT>                            case 107: return P_DURATION;<a name="line.266"></a>
<FONT color="green">267</FONT>                            case 108: return P_ALLOWED_DURATION;<a name="line.267"></a>
<FONT color="green">268</FONT>                            case 109: return P_PLAYBACK_PROGRESS;<a name="line.268"></a>
<FONT color="green">269</FONT>                            case 830: return P_CONVERSATION;<a name="line.269"></a>
<FONT color="green">270</FONT>                            case 831: return P_CHAT_MSG_GUID;<a name="line.270"></a>
<FONT color="green">271</FONT>                            }<a name="line.271"></a>
<FONT color="green">272</FONT>                            return P_UNKNOWN;<a name="line.272"></a>
<FONT color="green">273</FONT>                    }<a name="line.273"></a>
<FONT color="green">274</FONT>                    public static final int P_TYPE_VALUE                 = 100;<a name="line.274"></a>
<FONT color="green">275</FONT>                    public static final int P_PARTNER_HANDLE_VALUE       = 101;<a name="line.275"></a>
<FONT color="green">276</FONT>                    public static final int P_PARTNER_DISPLAY_NAME_VALUE = 102;<a name="line.276"></a>
<FONT color="green">277</FONT>                    public static final int P_STATUS_VALUE               = 103;<a name="line.277"></a>
<FONT color="green">278</FONT>                    public static final int P_FAILURE_REASON_VALUE       = 104;<a name="line.278"></a>
<FONT color="green">279</FONT>                    public static final int P_SUBJECT_VALUE              = 105;<a name="line.279"></a>
<FONT color="green">280</FONT>                    public static final int P_TIMESTAMP_VALUE            = 106;<a name="line.280"></a>
<FONT color="green">281</FONT>                    public static final int P_DURATION_VALUE             = 107;<a name="line.281"></a>
<FONT color="green">282</FONT>                    public static final int P_ALLOWED_DURATION_VALUE     = 108;<a name="line.282"></a>
<FONT color="green">283</FONT>                    public static final int P_PLAYBACK_PROGRESS_VALUE    = 109;<a name="line.283"></a>
<FONT color="green">284</FONT>                    public static final int P_CONVERSATION_VALUE         = 830;<a name="line.284"></a>
<FONT color="green">285</FONT>                    public static final int P_CHAT_MSG_GUID_VALUE        = 831;<a name="line.285"></a>
<FONT color="green">286</FONT>            }<a name="line.286"></a>
<FONT color="green">287</FONT>            private final static byte[] startRecording_req = {(byte) 90,(byte) 82,(byte) 7,(byte) 3};<a name="line.287"></a>
<FONT color="green">288</FONT>            /** Start recording your own auto-answer greeting message (leave message after the beep...) only. Recording of outgoing Voicemail messages start automatically (using Conversation.StartVoiceMessage) after playback of the remote side greeting message has finished. <a name="line.288"></a>
<FONT color="green">289</FONT>             */<a name="line.289"></a>
<FONT color="green">290</FONT>            public void startRecording() {<a name="line.290"></a>
<FONT color="green">291</FONT>                    try {<a name="line.291"></a>
<FONT color="green">292</FONT>                            sidDoRequest(startRecording_req)<a name="line.292"></a>
<FONT color="green">293</FONT>                            .endOneWay();<a name="line.293"></a>
<FONT color="green">294</FONT>                    } catch(IOException e) {<a name="line.294"></a>
<FONT color="green">295</FONT>                            mSidRoot.sidOnFatalError(e);<a name="line.295"></a>
<FONT color="green">296</FONT>                    }<a name="line.296"></a>
<FONT color="green">297</FONT>            }<a name="line.297"></a>
<FONT color="green">298</FONT>            private final static byte[] stopRecording_req = {(byte) 90,(byte) 82,(byte) 7,(byte) 4};<a name="line.298"></a>
<FONT color="green">299</FONT>            /** Stop recording of your own auto-answer greeting message only. To stop recording of and send an outgoing Voicemail, use Conversation.PostVoiceMessage. <a name="line.299"></a>
<FONT color="green">300</FONT>             */<a name="line.300"></a>
<FONT color="green">301</FONT>            public void stopRecording() {<a name="line.301"></a>
<FONT color="green">302</FONT>                    try {<a name="line.302"></a>
<FONT color="green">303</FONT>                            sidDoRequest(stopRecording_req)<a name="line.303"></a>
<FONT color="green">304</FONT>                            .endOneWay();<a name="line.304"></a>
<FONT color="green">305</FONT>                    } catch(IOException e) {<a name="line.305"></a>
<FONT color="green">306</FONT>                            mSidRoot.sidOnFatalError(e);<a name="line.306"></a>
<FONT color="green">307</FONT>                    }<a name="line.307"></a>
<FONT color="green">308</FONT>            }<a name="line.308"></a>
<FONT color="green">309</FONT>            private final static byte[] startPlayback_req = {(byte) 90,(byte) 82,(byte) 7,(byte) 5};<a name="line.309"></a>
<FONT color="green">310</FONT>            /** Initiates playback of a voice message <a name="line.310"></a>
<FONT color="green">311</FONT>             */<a name="line.311"></a>
<FONT color="green">312</FONT>            public void startPlayback() {<a name="line.312"></a>
<FONT color="green">313</FONT>                    try {<a name="line.313"></a>
<FONT color="green">314</FONT>                            sidDoRequest(startPlayback_req)<a name="line.314"></a>
<FONT color="green">315</FONT>                            .endOneWay();<a name="line.315"></a>
<FONT color="green">316</FONT>                    } catch(IOException e) {<a name="line.316"></a>
<FONT color="green">317</FONT>                            mSidRoot.sidOnFatalError(e);<a name="line.317"></a>
<FONT color="green">318</FONT>                    }<a name="line.318"></a>
<FONT color="green">319</FONT>            }<a name="line.319"></a>
<FONT color="green">320</FONT>            private final static byte[] stopPlayback_req = {(byte) 90,(byte) 82,(byte) 7,(byte) 6};<a name="line.320"></a>
<FONT color="green">321</FONT>            /** Terminates playback of a voice message <a name="line.321"></a>
<FONT color="green">322</FONT>             */<a name="line.322"></a>
<FONT color="green">323</FONT>            public void stopPlayback() {<a name="line.323"></a>
<FONT color="green">324</FONT>                    try {<a name="line.324"></a>
<FONT color="green">325</FONT>                            sidDoRequest(stopPlayback_req)<a name="line.325"></a>
<FONT color="green">326</FONT>                            .endOneWay();<a name="line.326"></a>
<FONT color="green">327</FONT>                    } catch(IOException e) {<a name="line.327"></a>
<FONT color="green">328</FONT>                            mSidRoot.sidOnFatalError(e);<a name="line.328"></a>
<FONT color="green">329</FONT>                    }<a name="line.329"></a>
<FONT color="green">330</FONT>            }<a name="line.330"></a>
<FONT color="green">331</FONT>            private final static byte[] delete_req = {(byte) 90,(byte) 82,(byte) 7,(byte) 7};<a name="line.331"></a>
<FONT color="green">332</FONT>            /** first from server, and then the local copy<a name="line.332"></a>
<FONT color="green">333</FONT>             */<a name="line.333"></a>
<FONT color="green">334</FONT>            public void delete() {<a name="line.334"></a>
<FONT color="green">335</FONT>                    try {<a name="line.335"></a>
<FONT color="green">336</FONT>                            sidDoRequest(delete_req)                        .endOneWay();<a name="line.336"></a>
<FONT color="green">337</FONT>                    } catch(IOException e) {<a name="line.337"></a>
<FONT color="green">338</FONT>                            mSidRoot.sidOnFatalError(e);<a name="line.338"></a>
<FONT color="green">339</FONT>                    }<a name="line.339"></a>
<FONT color="green">340</FONT>            }<a name="line.340"></a>
<FONT color="green">341</FONT>            private final static byte[] cancel_req = {(byte) 90,(byte) 82,(byte) 7,(byte) 8};<a name="line.341"></a>
<FONT color="green">342</FONT>            /** Canceling recording of your own auto-answer greeting message. To stop recording of and cancel an outgoing Voicemail, use Conversation.LeaveLiveSession. <a name="line.342"></a>
<FONT color="green">343</FONT>             */<a name="line.343"></a>
<FONT color="green">344</FONT>            public void cancel() {<a name="line.344"></a>
<FONT color="green">345</FONT>                    try {<a name="line.345"></a>
<FONT color="green">346</FONT>                            sidDoRequest(cancel_req)<a name="line.346"></a>
<FONT color="green">347</FONT>                            .endOneWay();<a name="line.347"></a>
<FONT color="green">348</FONT>                    } catch(IOException e) {<a name="line.348"></a>
<FONT color="green">349</FONT>                            mSidRoot.sidOnFatalError(e);<a name="line.349"></a>
<FONT color="green">350</FONT>                    }<a name="line.350"></a>
<FONT color="green">351</FONT>            }<a name="line.351"></a>
<FONT color="green">352</FONT>            private final static byte[] checkPermission_req = {(byte) 90,(byte) 82,(byte) 7,(byte) 13};<a name="line.352"></a>
<FONT color="green">353</FONT>            /** check if we can send voicemail (unauth,blocked,no priv etc cases). only OUTGOING<a name="line.353"></a>
<FONT color="green">354</FONT>             * @return result<a name="line.354"></a>
<FONT color="green">355</FONT>             */<a name="line.355"></a>
<FONT color="green">356</FONT>            public boolean checkPermission() {<a name="line.356"></a>
<FONT color="green">357</FONT>                    try {<a name="line.357"></a>
<FONT color="green">358</FONT>                            return sidDoRequest(checkPermission_req)<a name="line.358"></a>
<FONT color="green">359</FONT>                            .endRequest().getBoolParm(1, true);<a name="line.359"></a>
<FONT color="green">360</FONT>                    } catch(IOException e) {<a name="line.360"></a>
<FONT color="green">361</FONT>                            mSidRoot.sidOnFatalError(e);<a name="line.361"></a>
<FONT color="green">362</FONT>                            return false;<a name="line.362"></a>
<FONT color="green">363</FONT>                    }<a name="line.363"></a>
<FONT color="green">364</FONT>            }<a name="line.364"></a>
<FONT color="green">365</FONT>            /***<a name="line.365"></a>
<FONT color="green">366</FONT>             * generic multiget of a list of Property<a name="line.366"></a>
<FONT color="green">367</FONT>             * @param requested the list of requested properties of Voicemail<a name="line.367"></a>
<FONT color="green">368</FONT>             * @return SidGetResponding<a name="line.368"></a>
<FONT color="green">369</FONT>             */<a name="line.369"></a>
<FONT color="green">370</FONT>            public SidGetResponding sidMultiGet(Property[] requested) {<a name="line.370"></a>
<FONT color="green">371</FONT>                    return super.sidMultiGet(requested);<a name="line.371"></a>
<FONT color="green">372</FONT>            }<a name="line.372"></a>
<FONT color="green">373</FONT>            /***<a name="line.373"></a>
<FONT color="green">374</FONT>             * generic multiget of list of Property for a list of Voicemail<a name="line.374"></a>
<FONT color="green">375</FONT>             * @param requested the list of requested properties<a name="line.375"></a>
<FONT color="green">376</FONT>             * @return SidGetResponding[] can be casted to (Voicemail[]) if all properties are cached<a name="line.376"></a>
<FONT color="green">377</FONT>             */<a name="line.377"></a>
<FONT color="green">378</FONT>            static public SidGetResponding[] sidMultiGet(Property[] requested, Voicemail[] objects) {<a name="line.378"></a>
<FONT color="green">379</FONT>                    return SidObject.sidMultiGet(requested, objects);<a name="line.379"></a>
<FONT color="green">380</FONT>            }<a name="line.380"></a>
<FONT color="green">381</FONT>            public Type getType() {<a name="line.381"></a>
<FONT color="green">382</FONT>                    synchronized(this) {<a name="line.382"></a>
<FONT color="green">383</FONT>                            if ((mSidCached &amp; 0x1) != 0)<a name="line.383"></a>
<FONT color="green">384</FONT>                                    return mType;<a name="line.384"></a>
<FONT color="green">385</FONT>                    }<a name="line.385"></a>
<FONT color="green">386</FONT>                    return (Type) sidRequestEnumProperty(Property.P_TYPE);<a name="line.386"></a>
<FONT color="green">387</FONT>            }<a name="line.387"></a>
<FONT color="green">388</FONT>            /** registered username of the other party */<a name="line.388"></a>
<FONT color="green">389</FONT>            public String getPartnerHandle() {<a name="line.389"></a>
<FONT color="green">390</FONT>                    synchronized(this) {<a name="line.390"></a>
<FONT color="green">391</FONT>                            if ((mSidCached &amp; 0x2) != 0)<a name="line.391"></a>
<FONT color="green">392</FONT>                                    return mPartnerHandle;<a name="line.392"></a>
<FONT color="green">393</FONT>                    }<a name="line.393"></a>
<FONT color="green">394</FONT>                    return sidRequestStringProperty(Property.P_PARTNER_HANDLE);<a name="line.394"></a>
<FONT color="green">395</FONT>            }<a name="line.395"></a>
<FONT color="green">396</FONT>            /** user's display name of the other party */<a name="line.396"></a>
<FONT color="green">397</FONT>            public String getPartnerDisplayName() {<a name="line.397"></a>
<FONT color="green">398</FONT>                    synchronized(this) {<a name="line.398"></a>
<FONT color="green">399</FONT>                            if ((mSidCached &amp; 0x4) != 0)<a name="line.399"></a>
<FONT color="green">400</FONT>                                    return mPartnerDisplayName;<a name="line.400"></a>
<FONT color="green">401</FONT>                    }<a name="line.401"></a>
<FONT color="green">402</FONT>                    return sidRequestStringProperty(Property.P_PARTNER_DISPLAY_NAME);<a name="line.402"></a>
<FONT color="green">403</FONT>            }<a name="line.403"></a>
<FONT color="green">404</FONT>            public Status getStatus() {<a name="line.404"></a>
<FONT color="green">405</FONT>                    synchronized(this) {<a name="line.405"></a>
<FONT color="green">406</FONT>                            if ((mSidCached &amp; 0x8) != 0)<a name="line.406"></a>
<FONT color="green">407</FONT>                                    return mStatus;<a name="line.407"></a>
<FONT color="green">408</FONT>                    }<a name="line.408"></a>
<FONT color="green">409</FONT>                    return (Status) sidRequestEnumProperty(Property.P_STATUS);<a name="line.409"></a>
<FONT color="green">410</FONT>            }<a name="line.410"></a>
<FONT color="green">411</FONT>            public FailureReason getFailureReason() {<a name="line.411"></a>
<FONT color="green">412</FONT>                    synchronized(this) {<a name="line.412"></a>
<FONT color="green">413</FONT>                            if ((mSidCached &amp; 0x10) != 0)<a name="line.413"></a>
<FONT color="green">414</FONT>                                    return mFailureReason;<a name="line.414"></a>
<FONT color="green">415</FONT>                    }<a name="line.415"></a>
<FONT color="green">416</FONT>                    return (FailureReason) sidRequestEnumProperty(Property.P_FAILURE_REASON);<a name="line.416"></a>
<FONT color="green">417</FONT>            }<a name="line.417"></a>
<FONT color="green">418</FONT>            /** DEPRECATED: subject line */<a name="line.418"></a>
<FONT color="green">419</FONT>            public String getSubject() {<a name="line.419"></a>
<FONT color="green">420</FONT>                    synchronized(this) {<a name="line.420"></a>
<FONT color="green">421</FONT>                            if ((mSidCached &amp; 0x20) != 0)<a name="line.421"></a>
<FONT color="green">422</FONT>                                    return mSubject;<a name="line.422"></a>
<FONT color="green">423</FONT>                    }<a name="line.423"></a>
<FONT color="green">424</FONT>                    return sidRequestStringProperty(Property.P_SUBJECT);<a name="line.424"></a>
<FONT color="green">425</FONT>            }<a name="line.425"></a>
<FONT color="green">426</FONT>            /** timestamp of creation */<a name="line.426"></a>
<FONT color="green">427</FONT>            public long getTimestamp() {<a name="line.427"></a>
<FONT color="green">428</FONT>                    synchronized(this) {<a name="line.428"></a>
<FONT color="green">429</FONT>                            if ((mSidCached &amp; 0x40) != 0)<a name="line.429"></a>
<FONT color="green">430</FONT>                                    return mTimestamp;<a name="line.430"></a>
<FONT color="green">431</FONT>                    }<a name="line.431"></a>
<FONT color="green">432</FONT>                    return sidRequestTimestampProperty(Property.P_TIMESTAMP);<a name="line.432"></a>
<FONT color="green">433</FONT>            }<a name="line.433"></a>
<FONT color="green">434</FONT>            /** duration in seconds */<a name="line.434"></a>
<FONT color="green">435</FONT>            public int getDuration() {<a name="line.435"></a>
<FONT color="green">436</FONT>                    synchronized(this) {<a name="line.436"></a>
<FONT color="green">437</FONT>                            if ((mSidCached &amp; 0x80) != 0)<a name="line.437"></a>
<FONT color="green">438</FONT>                                    return mDuration;<a name="line.438"></a>
<FONT color="green">439</FONT>                    }<a name="line.439"></a>
<FONT color="green">440</FONT>                    return sidRequestUintProperty(Property.P_DURATION);<a name="line.440"></a>
<FONT color="green">441</FONT>            }<a name="line.441"></a>
<FONT color="green">442</FONT>            /** max allowed duration in seconds */<a name="line.442"></a>
<FONT color="green">443</FONT>            public int getAllowedDuration() {<a name="line.443"></a>
<FONT color="green">444</FONT>                    synchronized(this) {<a name="line.444"></a>
<FONT color="green">445</FONT>                            if ((mSidCached &amp; 0x100) != 0)<a name="line.445"></a>
<FONT color="green">446</FONT>                                    return mAllowedDuration;<a name="line.446"></a>
<FONT color="green">447</FONT>                    }<a name="line.447"></a>
<FONT color="green">448</FONT>                    return sidRequestUintProperty(Property.P_ALLOWED_DURATION);<a name="line.448"></a>
<FONT color="green">449</FONT>            }<a name="line.449"></a>
<FONT color="green">450</FONT>            /** VM playback progress in seconds */<a name="line.450"></a>
<FONT color="green">451</FONT>            public int getPlaybackProgress() {<a name="line.451"></a>
<FONT color="green">452</FONT>                    synchronized(this) {<a name="line.452"></a>
<FONT color="green">453</FONT>                            if ((mSidCached &amp; 0x200) != 0)<a name="line.453"></a>
<FONT color="green">454</FONT>                                    return mPlaybackProgress;<a name="line.454"></a>
<FONT color="green">455</FONT>                    }<a name="line.455"></a>
<FONT color="green">456</FONT>                    return sidRequestUintProperty(Property.P_PLAYBACK_PROGRESS);<a name="line.456"></a>
<FONT color="green">457</FONT>            }<a name="line.457"></a>
<FONT color="green">458</FONT>            /** CONVERSATION_ID of corresponding conversation */<a name="line.458"></a>
<FONT color="green">459</FONT>            public Conversation getConversation() {<a name="line.459"></a>
<FONT color="green">460</FONT>                    synchronized(this) {<a name="line.460"></a>
<FONT color="green">461</FONT>                            if ((mSidCached &amp; 0x400) != 0)<a name="line.461"></a>
<FONT color="green">462</FONT>                                    return mConversation;<a name="line.462"></a>
<FONT color="green">463</FONT>                    }<a name="line.463"></a>
<FONT color="green">464</FONT>                    return (Conversation) sidRequestObjectProperty(Property.P_CONVERSATION);<a name="line.464"></a>
<FONT color="green">465</FONT>            }<a name="line.465"></a>
<FONT color="green">466</FONT>            /** GUID of the message that the VM is tied to */<a name="line.466"></a>
<FONT color="green">467</FONT>            public byte[] getChatMsgGuid() {<a name="line.467"></a>
<FONT color="green">468</FONT>                    synchronized(this) {<a name="line.468"></a>
<FONT color="green">469</FONT>                            if ((mSidCached &amp; 0x800) != 0)<a name="line.469"></a>
<FONT color="green">470</FONT>                                    return mChatMsgGuid;<a name="line.470"></a>
<FONT color="green">471</FONT>                    }<a name="line.471"></a>
<FONT color="green">472</FONT>                    return sidRequestBinaryProperty(Property.P_CHAT_MSG_GUID);<a name="line.472"></a>
<FONT color="green">473</FONT>            }<a name="line.473"></a>
<FONT color="green">474</FONT>            public String sidGetStringProperty(final PropertyEnumConverting prop) {<a name="line.474"></a>
<FONT color="green">475</FONT>                    switch(prop.getId()) {<a name="line.475"></a>
<FONT color="green">476</FONT>                    case 101:<a name="line.476"></a>
<FONT color="green">477</FONT>                            return mPartnerHandle;<a name="line.477"></a>
<FONT color="green">478</FONT>                    case 102:<a name="line.478"></a>
<FONT color="green">479</FONT>                            return mPartnerDisplayName;<a name="line.479"></a>
<FONT color="green">480</FONT>                    case 105:<a name="line.480"></a>
<FONT color="green">481</FONT>                            return mSubject;<a name="line.481"></a>
<FONT color="green">482</FONT>                    }<a name="line.482"></a>
<FONT color="green">483</FONT>                    return "";<a name="line.483"></a>
<FONT color="green">484</FONT>            }<a name="line.484"></a>
<FONT color="green">485</FONT>            public SidObject sidGetObjectProperty(final PropertyEnumConverting prop) {<a name="line.485"></a>
<FONT color="green">486</FONT>                    assert(prop.getId() == 830);<a name="line.486"></a>
<FONT color="green">487</FONT>                    return mConversation;<a name="line.487"></a>
<FONT color="green">488</FONT>            }<a name="line.488"></a>
<FONT color="green">489</FONT>            public int sidGetIntProperty(final PropertyEnumConverting prop) {<a name="line.489"></a>
<FONT color="green">490</FONT>                    switch(prop.getId()) {<a name="line.490"></a>
<FONT color="green">491</FONT>                    case 107:<a name="line.491"></a>
<FONT color="green">492</FONT>                            return mDuration;<a name="line.492"></a>
<FONT color="green">493</FONT>                    case 108:<a name="line.493"></a>
<FONT color="green">494</FONT>                            return mAllowedDuration;<a name="line.494"></a>
<FONT color="green">495</FONT>                    case 109:<a name="line.495"></a>
<FONT color="green">496</FONT>                            return mPlaybackProgress;<a name="line.496"></a>
<FONT color="green">497</FONT>                    }<a name="line.497"></a>
<FONT color="green">498</FONT>                    return 0;<a name="line.498"></a>
<FONT color="green">499</FONT>            }<a name="line.499"></a>
<FONT color="green">500</FONT>            public EnumConverting sidGetEnumProperty(final PropertyEnumConverting prop) {<a name="line.500"></a>
<FONT color="green">501</FONT>                    switch(prop.getId()) {<a name="line.501"></a>
<FONT color="green">502</FONT>                    case 100:<a name="line.502"></a>
<FONT color="green">503</FONT>                            return mType;<a name="line.503"></a>
<FONT color="green">504</FONT>                    case 103:<a name="line.504"></a>
<FONT color="green">505</FONT>                            return mStatus;<a name="line.505"></a>
<FONT color="green">506</FONT>                    case 104:<a name="line.506"></a>
<FONT color="green">507</FONT>                            return mFailureReason;<a name="line.507"></a>
<FONT color="green">508</FONT>                    }<a name="line.508"></a>
<FONT color="green">509</FONT>                    return null;<a name="line.509"></a>
<FONT color="green">510</FONT>            }<a name="line.510"></a>
<FONT color="green">511</FONT>            public byte[] sidGetBinaryProperty(final PropertyEnumConverting prop) {<a name="line.511"></a>
<FONT color="green">512</FONT>                    assert(prop.getId() == 831);<a name="line.512"></a>
<FONT color="green">513</FONT>                    return mChatMsgGuid;<a name="line.513"></a>
<FONT color="green">514</FONT>            }<a name="line.514"></a>
<FONT color="green">515</FONT>            public String getPropertyAsString(final int prop) {<a name="line.515"></a>
<FONT color="green">516</FONT>                    switch (prop) {<a name="line.516"></a>
<FONT color="green">517</FONT>                    case 100: return getType().toString();<a name="line.517"></a>
<FONT color="green">518</FONT>                    case 101: return getPartnerHandle();<a name="line.518"></a>
<FONT color="green">519</FONT>                    case 102: return getPartnerDisplayName();<a name="line.519"></a>
<FONT color="green">520</FONT>                    case 103: return getStatus().toString();<a name="line.520"></a>
<FONT color="green">521</FONT>                    case 104: return getFailureReason().toString();<a name="line.521"></a>
<FONT color="green">522</FONT>                    case 105: return getSubject();<a name="line.522"></a>
<FONT color="green">523</FONT>                    case 107: return Integer.toString(getDuration());<a name="line.523"></a>
<FONT color="green">524</FONT>                    case 108: return Integer.toString(getAllowedDuration());<a name="line.524"></a>
<FONT color="green">525</FONT>                    case 109: return Integer.toString(getPlaybackProgress());<a name="line.525"></a>
<FONT color="green">526</FONT>                    case 830: return getConversation() != null ? Integer.toString(getConversation().getOid()) : "(null)";<a name="line.526"></a>
<FONT color="green">527</FONT>                    case 831: return "&lt;binary&gt;";<a name="line.527"></a>
<FONT color="green">528</FONT>                    }<a name="line.528"></a>
<FONT color="green">529</FONT>                    return "&lt;unkown&gt;";<a name="line.529"></a>
<FONT color="green">530</FONT>            }<a name="line.530"></a>
<FONT color="green">531</FONT>            public String getPropertyAsString(final Property prop) {<a name="line.531"></a>
<FONT color="green">532</FONT>                    return getPropertyAsString(prop.getId());<a name="line.532"></a>
<FONT color="green">533</FONT>            }<a name="line.533"></a>
<FONT color="green">534</FONT>            protected void sidOnChangedProperty(final int propertyId, final int value, final String svalue) {<a name="line.534"></a>
<FONT color="green">535</FONT>                    final Property property = Property.get(propertyId);<a name="line.535"></a>
<FONT color="green">536</FONT>                    if (property == Property.P_UNKNOWN) return;<a name="line.536"></a>
<FONT color="green">537</FONT>                    final int idx = property.getIdx();<a name="line.537"></a>
<FONT color="green">538</FONT>                    if (idx != 0) {<a name="line.538"></a>
<FONT color="green">539</FONT>                            int bit  = 1&lt;&lt;((idx-1)%32);<a name="line.539"></a>
<FONT color="green">540</FONT>                            synchronized (this) {<a name="line.540"></a>
<FONT color="green">541</FONT>                                    mSidCached|=bit;<a name="line.541"></a>
<FONT color="green">542</FONT>                                    switch (propertyId) {<a name="line.542"></a>
<FONT color="green">543</FONT>                                    case 100: mType = Type.get(value); break;<a name="line.543"></a>
<FONT color="green">544</FONT>                                    case 101:<a name="line.544"></a>
<FONT color="green">545</FONT>                                            if (svalue != null) mPartnerHandle = svalue;<a name="line.545"></a>
<FONT color="green">546</FONT>                                            else mSidCached &amp;=~bit;<a name="line.546"></a>
<FONT color="green">547</FONT>                                            break;<a name="line.547"></a>
<FONT color="green">548</FONT>                                    case 102:<a name="line.548"></a>
<FONT color="green">549</FONT>                                            if (svalue != null) mPartnerDisplayName = svalue;<a name="line.549"></a>
<FONT color="green">550</FONT>                                            else mSidCached &amp;=~bit;<a name="line.550"></a>
<FONT color="green">551</FONT>                                            break;<a name="line.551"></a>
<FONT color="green">552</FONT>                                    case 103: mStatus = Status.get(value); break;<a name="line.552"></a>
<FONT color="green">553</FONT>                                    case 104: mFailureReason = FailureReason.get(value); break;<a name="line.553"></a>
<FONT color="green">554</FONT>                                    case 105:<a name="line.554"></a>
<FONT color="green">555</FONT>                                            if (svalue != null) mSubject = svalue;<a name="line.555"></a>
<FONT color="green">556</FONT>                                            else mSidCached &amp;=~bit;<a name="line.556"></a>
<FONT color="green">557</FONT>                                            break;<a name="line.557"></a>
<FONT color="green">558</FONT>                                    case 107: mDuration = value; break;<a name="line.558"></a>
<FONT color="green">559</FONT>                                    case 108: mAllowedDuration = value; break;<a name="line.559"></a>
<FONT color="green">560</FONT>                                    case 109: mPlaybackProgress = value; break;<a name="line.560"></a>
<FONT color="green">561</FONT>                                    case 830:<a name="line.561"></a>
<FONT color="green">562</FONT>                                            if (value != 0)<a name="line.562"></a>
<FONT color="green">563</FONT>                                                    mConversation = (Conversation) mSidRoot.sidGetObject(property.getModuleId(), value);<a name="line.563"></a>
<FONT color="green">564</FONT>                                            else {<a name="line.564"></a>
<FONT color="green">565</FONT>                                                    mConversation = null;<a name="line.565"></a>
<FONT color="green">566</FONT>                                                    mSidCached &amp;=~bit;<a name="line.566"></a>
<FONT color="green">567</FONT>                                            }<a name="line.567"></a>
<FONT color="green">568</FONT>                                            break;<a name="line.568"></a>
<FONT color="green">569</FONT>                                    default: mSidCached&amp;=~bit; break;<a name="line.569"></a>
<FONT color="green">570</FONT>                                    }<a name="line.570"></a>
<FONT color="green">571</FONT>                            }<a name="line.571"></a>
<FONT color="green">572</FONT>                    }<a name="line.572"></a>
<FONT color="green">573</FONT>                    VoicemailListener listener = ((Skype) mSidRoot).getVoicemailListener();<a name="line.573"></a>
<FONT color="green">574</FONT>                    if (listener != null)<a name="line.574"></a>
<FONT color="green">575</FONT>                            listener.onPropertyChange(this, property, value, svalue);<a name="line.575"></a>
<FONT color="green">576</FONT>            }<a name="line.576"></a>
<FONT color="green">577</FONT>            public void sidSetProperty(final PropertyEnumConverting prop, final String newValue) {<a name="line.577"></a>
<FONT color="green">578</FONT>                    final int propId = prop.getId();<a name="line.578"></a>
<FONT color="green">579</FONT>                    switch(propId) {<a name="line.579"></a>
<FONT color="green">580</FONT>                    case 101:<a name="line.580"></a>
<FONT color="green">581</FONT>                            mSidCached |= 0x2;<a name="line.581"></a>
<FONT color="green">582</FONT>                            mPartnerHandle=  newValue;<a name="line.582"></a>
<FONT color="green">583</FONT>                            break;<a name="line.583"></a>
<FONT color="green">584</FONT>                    case 102:<a name="line.584"></a>
<FONT color="green">585</FONT>                            mSidCached |= 0x4;<a name="line.585"></a>
<FONT color="green">586</FONT>                            mPartnerDisplayName=  newValue;<a name="line.586"></a>
<FONT color="green">587</FONT>                            break;<a name="line.587"></a>
<FONT color="green">588</FONT>                    case 105:<a name="line.588"></a>
<FONT color="green">589</FONT>                            mSidCached |= 0x20;<a name="line.589"></a>
<FONT color="green">590</FONT>                            mSubject=  newValue;<a name="line.590"></a>
<FONT color="green">591</FONT>                            break;<a name="line.591"></a>
<FONT color="green">592</FONT>                    }<a name="line.592"></a>
<FONT color="green">593</FONT>            }<a name="line.593"></a>
<FONT color="green">594</FONT>            public void sidSetProperty(final PropertyEnumConverting prop, final SidObject newValue) {<a name="line.594"></a>
<FONT color="green">595</FONT>                    final int propId = prop.getId();<a name="line.595"></a>
<FONT color="green">596</FONT>                    assert(propId == 830);<a name="line.596"></a>
<FONT color="green">597</FONT>                    mSidCached |= 0x400;<a name="line.597"></a>
<FONT color="green">598</FONT>                    mConversation= (Conversation) newValue;<a name="line.598"></a>
<FONT color="green">599</FONT>            }<a name="line.599"></a>
<FONT color="green">600</FONT>            public void sidSetProperty(final PropertyEnumConverting prop, final int newValue) {<a name="line.600"></a>
<FONT color="green">601</FONT>                    final int propId = prop.getId();<a name="line.601"></a>
<FONT color="green">602</FONT>                    switch(propId) {<a name="line.602"></a>
<FONT color="green">603</FONT>                    case 100:<a name="line.603"></a>
<FONT color="green">604</FONT>                            mSidCached |= 0x1;<a name="line.604"></a>
<FONT color="green">605</FONT>                            mType= Type.get(newValue);<a name="line.605"></a>
<FONT color="green">606</FONT>                            break;<a name="line.606"></a>
<FONT color="green">607</FONT>                    case 103:<a name="line.607"></a>
<FONT color="green">608</FONT>                            mSidCached |= 0x8;<a name="line.608"></a>
<FONT color="green">609</FONT>                            mStatus= Status.get(newValue);<a name="line.609"></a>
<FONT color="green">610</FONT>                            break;<a name="line.610"></a>
<FONT color="green">611</FONT>                    case 104:<a name="line.611"></a>
<FONT color="green">612</FONT>                            mSidCached |= 0x10;<a name="line.612"></a>
<FONT color="green">613</FONT>                            mFailureReason= FailureReason.get(newValue);<a name="line.613"></a>
<FONT color="green">614</FONT>                            break;<a name="line.614"></a>
<FONT color="green">615</FONT>                    case 107:<a name="line.615"></a>
<FONT color="green">616</FONT>                            mSidCached |= 0x80;                     mDuration=  newValue;<a name="line.616"></a>
<FONT color="green">617</FONT>                            break;<a name="line.617"></a>
<FONT color="green">618</FONT>                    case 108:<a name="line.618"></a>
<FONT color="green">619</FONT>                            mSidCached |= 0x100;<a name="line.619"></a>
<FONT color="green">620</FONT>                            mAllowedDuration=  newValue;<a name="line.620"></a>
<FONT color="green">621</FONT>                            break;<a name="line.621"></a>
<FONT color="green">622</FONT>                    case 109:<a name="line.622"></a>
<FONT color="green">623</FONT>                            mSidCached |= 0x200;<a name="line.623"></a>
<FONT color="green">624</FONT>                            mPlaybackProgress=  newValue;<a name="line.624"></a>
<FONT color="green">625</FONT>                            break;<a name="line.625"></a>
<FONT color="green">626</FONT>                    }<a name="line.626"></a>
<FONT color="green">627</FONT>            }<a name="line.627"></a>
<FONT color="green">628</FONT>            public void sidSetProperty(final PropertyEnumConverting prop, final byte[] newValue) {<a name="line.628"></a>
<FONT color="green">629</FONT>                    final int propId = prop.getId();<a name="line.629"></a>
<FONT color="green">630</FONT>                    assert(propId == 831);<a name="line.630"></a>
<FONT color="green">631</FONT>                    mSidCached |= 0x800;<a name="line.631"></a>
<FONT color="green">632</FONT>                    mChatMsgGuid=  newValue;<a name="line.632"></a>
<FONT color="green">633</FONT>            }<a name="line.633"></a>
<FONT color="green">634</FONT>            public Type          mType;<a name="line.634"></a>
<FONT color="green">635</FONT>            public String        mPartnerHandle;<a name="line.635"></a>
<FONT color="green">636</FONT>            public String        mPartnerDisplayName;<a name="line.636"></a>
<FONT color="green">637</FONT>            public Status        mStatus;<a name="line.637"></a>
<FONT color="green">638</FONT>            public FailureReason mFailureReason;<a name="line.638"></a>
<FONT color="green">639</FONT>            public String        mSubject;<a name="line.639"></a>
<FONT color="green">640</FONT>            public long          mTimestamp;<a name="line.640"></a>
<FONT color="green">641</FONT>            public int           mDuration;<a name="line.641"></a>
<FONT color="green">642</FONT>            public int           mAllowedDuration;<a name="line.642"></a>
<FONT color="green">643</FONT>            public int           mPlaybackProgress;<a name="line.643"></a>
<FONT color="green">644</FONT>            public Conversation  mConversation;<a name="line.644"></a>
<FONT color="green">645</FONT>            public byte[]        mChatMsgGuid;<a name="line.645"></a>
<FONT color="green">646</FONT>            public int moduleId() {<a name="line.646"></a>
<FONT color="green">647</FONT>                    return 7;<a name="line.647"></a>
<FONT color="green">648</FONT>            }<a name="line.648"></a>
<FONT color="green">649</FONT>            <a name="line.649"></a>
<FONT color="green">650</FONT>            public Voicemail(final int oid, final SidRoot root) {<a name="line.650"></a>
<FONT color="green">651</FONT>                    super(oid, root, 12);<a name="line.651"></a>
<FONT color="green">652</FONT>            }<a name="line.652"></a>
<FONT color="green">653</FONT>    }<a name="line.653"></a>




























































</PRE>
</BODY>
</HTML>
